"use strict";(self.webpackChunkgoit_react_08_hw_phonebook=self.webpackChunkgoit_react_08_hw_phonebook||[]).push([[366],{6319:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var r=t(176),a=t(311),o=t(2322),c=t(5442),s=t(9434),i=t(4808),l=t(184),u=function(){var e=(0,s.I0)();return(0,l.jsx)(r.k,{children:(0,l.jsxs)(a.B,{children:[(0,l.jsx)(o.Ui,{children:"Find contacts :",fontSize:"1em"}),(0,l.jsx)(c.I,{type:"text",name:"filter",placeholder:"Find contacts by name",onChange:function(n){e((0,i.s)(n.currentTarget.value))},fontSize:"1em",mb:2})]})})},d=t(2791),m=t(3541),h=t(9439),f=t(9229),x=t(4224),p=t(9975),j=t(581),b=t(3182),g=t(9126),v=t(3634),C=t(1729),S=t(5193),z=t(1211),w=t(7970),y=t(1216),k=t(6982);function I(e){var n=e.handleUpdate,t=e.updatedName,r=e.updatedNumber,s=e.handleChange,i=e.onClose;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(S.K,{as:"form",spacing:2,onSubmit:n,mb:4,children:[(0,l.jsx)(z.x,{children:"Update your contact"}),(0,l.jsx)(w.o,{}),(0,l.jsxs)(y.f,{pb:6,children:[(0,l.jsxs)(a.B,{children:[(0,l.jsx)(o.Ui,{children:"Name:",w:"5.2rem",fontSize:"1em"}),(0,l.jsx)(c.I,{type:"text",name:"name",value:t,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Only letters, apostrophe, dash and spaces.",required:!0,placeholder:"Enter name",w:"17rem",fontSize:"1em",onChange:s})]}),(0,l.jsxs)(a.B,{children:[(0,l.jsx)(o.Ui,{children:"Number:",w:"5.2rem",fontSize:"1em"}),(0,l.jsx)(c.I,{type:"tel",name:"number",value:r,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,placeholder:"Enter phone number",w:"17rem",fontSize:"1em",onChange:s})]})]}),(0,l.jsxs)(k.m,{children:[(0,l.jsx)(x.z,{colorScheme:"blue",mr:3,type:"submit",children:"Save"}),(0,l.jsx)(x.z,{onClick:i,children:"Cancel"})]})]})})}var F=function(e){var n=e.contact,t=n.name,a=n.number,o=n.id,c=(e.contacts,(0,d.useRef)(null)),i=(0,d.useRef)(null),u=(0,d.useState)(!1),m=(0,h.Z)(u,2),S=m[0],z=m[1],w=(0,d.useState)(t),y=(0,h.Z)(w,2),k=y[0],F=y[1],E=(0,d.useState)(a),Z=(0,h.Z)(E,2),_=Z[0],L=Z[1],N=function(){return z(!1)},U=(0,s.I0)();return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.k,{alignItems:"center",children:[(0,l.jsx)(f.x,{ml:"5%",mr:"auto",fontSize:{md:"lg",lg:"lg"},fontWeight:"500",children:t}),(0,l.jsx)(f.x,{ml:"auto",mr:"5%",fontWeight:"500",fontSize:{md:"lg",lg:"lg"},children:a}),(0,l.jsx)(x.z,{onClick:function(){return z(!0)},children:(0,l.jsx)(g.Ph1,{size:20,color:"var(--chakra-colors-blue-500)"})}),(0,l.jsx)(x.z,{onClick:function(){U((0,v.GK)(o)),(0,C.X)("Contact: ".concat(t," is deleted"))},color:"#f44336",children:(0,l.jsx)(g.yvY,{size:20})}),(0,l.jsxs)(p.u_,{initialFocusRef:c,finalFocusRef:i,isOpen:S,onClose:N,children:[(0,l.jsx)(j.Z,{}),(0,l.jsx)(b.h,{children:(0,l.jsx)(I,{updatedName:k,updatedNumber:_,handleUpdate:function(e){e.preventDefault();var n=e.target;U((0,v.Tk)({id:o,contact:{name:n.name.value,number:n.number.value}})),(0,C.X)("Contact: ".concat(t," is updated")),n.reset(),N()},handleChange:function(e){var n=e.target,t=n.name,r=n.value;switch(t){case"name":F(r);break;case"number":L(r);break;default:return}},onClose:N})})]})]})})},E=function(e){var n=e.contacts;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(m.aV,{spacing:2,w:{base:"384px",lg:"450px"},children:n.map((function(e){var t=e.id,r=e.name,a=e.number;return(0,l.jsx)(F,{w:"100%",display:"flex",alignItems:"center",contact:{id:t,name:r,number:a},contacts:n},t)}))})})},Z=t(6916),_=function(e){return e.phonebook.contacts.items},L=function(e){return e.phonebook.contacts.isLoading},N=function(e){return e.phonebook.contacts.error},U=(0,Z.P1)([_,function(e){return e.filter}],(function(e,n){return e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))})),B=function(){var e=(0,s.I0)(),n=(0,s.v9)(L),t=(0,s.v9)(_),r=(0,d.useState)(""),i=(0,h.Z)(r,2),u=i[0],m=i[1],f=(0,d.useState)(""),p=(0,h.Z)(f,2),j=p[0],b=p[1],g=function(e){e.preventDefault();var n=e.currentTarget,r=n.name,a=n.value;switch(r){case"name":if(t.some((function(e){return a.toLowerCase()===e.name.toLowerCase()})))return void(0,C.E)("Sorry ".concat(a," already exist!"));m(a);break;case"number":if(t.some((function(e){return a.toLowerCase()===e.number.toLowerCase()})))return void(0,C.E)("Sorry ".concat(a," already exist!"));b(a)}},z=function(){m(""),b("")};return(0,d.useEffect)((function(){e((0,v.yF)())}),[e]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("form",{onSubmit:function(n){n.preventDefault(),u&&j?function(){var n={name:u,number:j};try{e((0,v.uK)(n)),(0,C.X)("Contact: ".concat(n.name," is added to your book")),z()}catch(t){console.log("error",t)}}():(0,C.E)("Please fill in all fields")},children:(0,l.jsxs)(S.K,{spacing:2,mb:4,children:[(0,l.jsxs)(a.B,{children:[(0,l.jsx)(o.Ui,{children:"Name:",w:"5.2rem",fontSize:"1em"}),(0,l.jsx)(c.I,{type:"text",name:"name",value:u,onChange:g,placeholder:"Enter name",w:"17rem",fontSize:"1em"})]}),(0,l.jsxs)(a.B,{children:[(0,l.jsx)(o.Ui,{children:"Number:",w:"5.2rem",fontSize:"1em"}),(0,l.jsx)(c.I,{type:"tel",name:"number",value:j,onChange:g,placeholder:"Enter phone number",w:"17rem",fontSize:"1em"})]}),(0,l.jsx)(x.z,{type:"submit",disabled:n,fontSize:"l",children:"Add contact"})]})})})},P=t(5946),A=t(1252);function K(){var e=(0,A.ff)("gray.50","gray.700"),n=(0,s.I0)(),t=(0,s.v9)(_),a=(0,s.v9)(L),o=(0,s.v9)(N),c=(0,s.v9)(U);return(0,d.useEffect)((function(){n((0,v.yF)())}),[n]),(0,l.jsxs)(r.k,{name:"flex",direction:"column",align:"center",pt:10,px:10,bg:e,h:"100%",children:[(0,l.jsx)(P.X,{as:"h1",fontSize:"2xl",display:"flex",alignItems:"flex-end",mb:2,children:"Phonebook"}),(0,l.jsx)(B,{}),(0,l.jsx)(u,{}),(0,l.jsxs)("div",{title:"Contacts list",children:[a&&(0,l.jsx)("p",{children:"Loading contacts..."}),o&&(0,l.jsx)("p",{children:o}),t.length>0&&(0,l.jsx)(E,{contacts:c})]})]})}}}]);
//# sourceMappingURL=366.333061dd.chunk.js.map